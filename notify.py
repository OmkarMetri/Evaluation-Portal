# import smtplib , ssl# sender="classschedulerpes@gmail.com"# receiver="gundamsatyabhamareddy@pesu.pes.edu"# #receiver = ["nakshatra1998@gmail.com","lavanya.ramkumar99@gmail.com","niharikapes@gmail.com"]# s = smtplib.SMTP("smtp.gmail.com",587)# s.starttls()# s.login(sender, "Abcde!2345")# message = "YO"# s.sendmail(sender, receiver, message) # s.quit() import smtplib, sslimport timefrom string import Templatefrom datetime import datetime,timedeltafrom email.mime.multipart import MIMEMultipartfrom email.mime.text import MIMETextMY_ADDRESS = 'nakshatra1998@gmail.com'#PASSWORD = 'xfbabxvtdnvrgzra'PASSWORD = 'shivalaya'def read_template(filename):	"""	Returns a Template object comprising the contents of the 	file specified by filename.	"""		with open(filename, 'r', encoding='utf-8') as template_file:		template_file_content = template_file.read()	return Template(template_file_content)def NewAssignment(emails,by,to,url,assignment):		MY_ADDRESS = 'nakshatra1998@gmail.com'	PASSWORD = 'shivalaya'	message = """\	Subject: Assignment	Assignment Posted	"""	context = ssl.create_default_context()	with smtplib.SMTP_SSL(host='smtp.gmail.com', port=465, context=context) as server:		server.login(MY_ADDRESS,PASSWORD)		server.sendmail(MY_ADDRESS,'metriomkar56@gmail.com', message)		print("success")	print('exit')		def DeleteAssignment(emails,by,to,assignment):	message_template = read_template('templates/mails/deleted.txt')	# set up the SMTP server	s = smtplib.SMTP(host='smtp.gmail.com', port=587)	s.starttls()	s.login(MY_ADDRESS, PASSWORD)	# For each contact, send the email:	for email in emails:		msg = MIMEMultipart()		message = message_template.substitute(name=email[0],by=by,to=to,assignment=assignment)		print(message)		msg['From']=MY_ADDRESS		msg['To']=email[1]		msg['Subject']="Assignment Deleted"		msg.attach(MIMEText(message, 'html'))				s.send_message(msg)		del msg			s.quit()def Deadline(emails,by,to,url,assignment,deadline):	message_template = read_template('templates/mails/deadline.txt')	dead_obj=datetime.strptime(deadline, "%Y-%m-%d %H:%M:%S")	note_date=dead_obj- timedelta(days=1)	if(note_date>datetime.now()):		time.sleep(note_date.timestamp() - time.time())		# set up the SMTP server		s = smtplib.SMTP(host='smtp.gmail.com', port=587)		s.starttls()		s.login(MY_ADDRESS, PASSWORD)		i=0		# For each contact, send the email:		for email in emails:			msg = MIMEMultipart()			message = message_template.substitute(name=email[0],by=by,to=to,assignment=assignment,dead=deadline,url=url[i])			print(message)			msg['From']=MY_ADDRESS			msg['To']=email[1]			msg['Subject']="Deadline Approaching!!"			msg.attach(MIMEText(message, 'html'))						s.send_message(msg)			del msg			i+=1					s.quit()	note_date=dead_obj- timedelta(hours=1)	if(note_date>datetime.now()):		time.sleep(note_date.timestamp() - time.time())		# set up the SMTP server		s = smtplib.SMTP(host='smtp.gmail.com', port=587)		s.starttls()		s.login(MY_ADDRESS, PASSWORD)		i=0		# For each contact, send the email:		for email in emails:			msg = MIMEMultipart()			message = message_template.substitute(name=email[0],by=by,to=to,assignment=assignment,dead=deadline,url=url[i])			print(message)			msg['From']=MY_ADDRESS			msg['To']=email[1]			msg['Subject']="Deadline Approaching!!!"			msg.attach(MIMEText(message, 'html'))						s.send_message(msg)			del msg			i+=1					s.quit()# NewAssignment([["satya","satyabhamareddy@gmail.com"],["parvathi","parvatig@gmail.com"]],"teacher","course","www.google.com","Name")# DeleteAssignment([["satya","satyabhamareddy@gmail.com"],["parvathi","parvatig@gmail.com"]],"teacher","course","Name")#Deadline([["satya","satyabhamareddy@gmail.com"],["parvathi","parvatig@gmail.com"]],"teacher","course","www.google.com","Name","23-08-2019 21:00:00")